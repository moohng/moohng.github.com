<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="专注前端，记录生活！"><meta name="keywords" content="Hexo, js, Nodejs, React, Vue, JavaScript, CSS3, 前端"><title>超轻量代码实现字段校验工具库（移动端） - 红颜漠</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="/categories/JavaScript/"><span>JavaScript</span></a></li><li><a href="/categories/React/"><span>React</span></a></li><li><a href="/categories/Vue/"><span>Vue</span></a></li><li><a href="/categories/全栈/"><span>全栈</span></a></li><li><a href="/categories/CSS/"><span>CSS</span></a></li><li><a href="/categories/其他/"><span>其他</span></a></li><li><a href="https://github.com/moohng"><span>Github</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">超轻量代码实现字段校验工具库（移动端）</h1><ul class="meta"><li><i class="icon icon-author"></i>Kevin</li><li><i class="icon icon-clock"></i>21 Minutes</li><li><i class="icon icon-calendar"></i>2018年2月10日</li></ul></div></div><div class="article-content" style="max-width:800px"><p>先附上项目的链接地址：</p>
<blockquote>
<p>github: <a href="https://github.com/moohng/validator" target="_blank" rel="noopener">https://github.com/moohng/validator</a></p>
</blockquote>
<h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>有表单的地方必有校验，我们使用不同的框架有不同的校验方法。在PC端基于<code>React</code>的<code>Ant Design</code>框架中的<code>Form</code>表单的功能就十分强大，而在移动端，却很难找到一款能与之匹敌完整框架。移动端比较流行的<code>vux</code>框架，虽然有的组件自带了校验功能，但然并卵，基本上很难匹配真实项目的需求。</p>
<p>放弃<code>vux</code>组件自带的校验功能，后来在<code>github</code>上找到一款比较流行的校验库<code>vee-validate</code>。这个库做到了与表单组件之间的解耦，确实也能够灵活的实现各式各样的项目需求，但给我的感觉就是有点重。一般来说，移动端的开销越低越好，代码越轻量越好，区区一个校验，实在不忍心用上如此庞大的工具。</p>
<p>思前想后，还不如自己实现一套校验方案。首先<strong>校验工具必须要与组件完全解耦</strong>，其次<strong>校验工具要足够轻量，够用就好</strong>。移动端不比PC端，考虑到性能，我们一般校验表单都是在提交的时候进行校验，对不满足要求的字段进行提示（比如：字段组件样式变红，<code>Toast</code>轻提示等）。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><ul>
<li><p>为什么要与组件解耦？</p>
<p>  很多时候，我们的表单组件都并非真正意义上的表单，尤其是现在<code>React</code>和<code>Vue</code>带来的组件化时代，很多表单组件都是根据我们自己的需求来封装的，各式各样。如果每封装一个组件，就要带上完整的校验功能，那必然是痛苦的，而且有时候不同的第三方组件库很难实现校验的统一性。所以，我们校验的应该是<strong>字段</strong>，跟组件本身没有任何关系，尽管我们的字段取值是来自于组件。如此一来，我们的校验工具就适用于任何组件，不管它是否是真正意义上的表单，只要将这个组件跟校验的字段对应起来即可。所以，我们其实是对字段的校验。</p>
</li>
<li><p>如何更轻量的实现对字段的校验？</p>
<p>  理想的方式应该是这样的：校验结果 = 校验函数(校验目标集合, 校验规则)，用代码实现是这样的：<code>result = validator(target, rules);</code>。我们只要在提交表单的时候执行校验函数，传入待校验的<strong>字段集合</strong>和一套<strong>校验规则</strong>，拿到最后的<strong>校验结果</strong>。最后，根据结果来做一些后续的处理。</p>
</li>
<li><p>目标集合、校验规则和校验结果如何定义？</p>
<p>  一个表单存在多个字段，<strong>目标集合</strong>应该就是一个包含所有字段的一个对象。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">16</span>, <span class="attr">email</span>: <span class="string">'xiaoming@qq.com'</span> &#125;</span><br></pre></td></tr></table></figure>
<p>  不同字段往往有不一样的校验规则，<strong>校验规则</strong>需要对每一个字段进行定义，因而也应该是一个包含所有字段的一个对象。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">name</span>: 规则<span class="number">1</span>, <span class="attr">age</span>: 规则<span class="number">2</span>, <span class="attr">email</span>: 规则<span class="number">3</span> &#125;</span><br></pre></td></tr></table></figure>
<p>  对<strong>规则</strong>的定义，我们一般的需求有<strong>为空判断</strong>、<strong>字符串是否满足条件</strong>、<strong>数字是否在指定范围之内</strong>、<strong>其他特殊处理</strong>。总结起来，校验类型可以归为3类：为空、正则、自定义。<strong>为空判断</strong>最为常见，单独归为一类；<strong>正则表达式</strong>可以满足大多数的校验规则，可归为一类；前两种基本上已经满足了百分之七八十的业务场景，所以将剩下的所有校验规则通过<strong>自定义函数</strong>实现。所以最后每一个字段的校验规则是这样的：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    required: <span class="literal">true</span>,</span><br><span class="line">    pattern: <span class="regexp">/^QQ\w&#123;2,5&#125;$/</span>,</span><br><span class="line">    validator() &#123;</span><br><span class="line">        <span class="comment">// TODO...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  当我们拿到<strong>校验结果</strong>，我们想要知道<strong>校验结果是否通过</strong>、<strong>校验结果中不通过的字段以及每个字段对应的提示语</strong>。所以，校验结果应该是一个包含所有不通过字段的对象。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> result = &#123; <span class="attr">name</span>: <span class="string">'姓名不能为空'</span>, <span class="attr">age</span>: <span class="string">'年龄必须大于18岁'</span> &#125;</span><br></pre></td></tr></table></figure>
<p>  对于校验结果，我们或许只关心<strong>本次校验是否通过</strong>，仅仅拿到单纯的校验结果对象不便于操作。因此，<code>result</code>应该还有一个<code>hasError()</code>函数用于返回<strong>校验结果是否出错</strong>，另外还应有一个<code>first()</code>函数用于返回<strong>第一个错误字段的提示信息</strong>。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result.hasError()   <span class="comment">// true</span></span><br><span class="line">result.first()      <span class="comment">// 姓名不能为空</span></span><br></pre></td></tr></table></figure>
<p>  根据不同的需求，可能还应该提供其他的操作方法。</p>
</li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="校验函数（validator）"><a href="#校验函数（validator）" class="headerlink" title="校验函数（validator）"></a>校验函数（validator）</h3><p>思路：</p>
<ul>
<li>遍历规则集合，拿每一条规则去校验目标集合中对应的字段；</li>
<li>首先是<strong>为空</strong>校验，空的定义应该是：<code>null</code>、<code>undefined</code>、<code>[]</code>、<code>{}</code>、<code>&#39;&#39;</code>等；</li>
<li>若为空校验不通过，记录提示文本信息并跳过其他校验，否则继续下一个校验；</li>
<li>然后是<strong>正则</strong>校验，同理；</li>
<li>最后是<strong>自定义</strong>校验，自定义校验函数应该传入当前校验的值和整个目标的集合对象（可能会存在与其他字段作比较等）。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validator</span>(<span class="params">target, rules</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> ruleKeys = rules ? <span class="built_in">Object</span>.keys(rules) : []</span><br><span class="line">  <span class="keyword">if</span> (!ruleKeys.length) <span class="keyword">return</span> <span class="keyword">new</span> Result()</span><br><span class="line">  <span class="keyword">const</span> results = ruleKeys.reduce(<span class="function">(<span class="params">errors, key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value = target[key]</span><br><span class="line">    <span class="keyword">let</span> tips = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> &#123; required, pattern, validate, alias = key, message = <span class="string">`请输入正确的<span class="subst">$&#123;alias&#125;</span>`</span>, trim = <span class="literal">true</span> &#125; = rules[key] || &#123;&#125;</span><br><span class="line">    <span class="comment">// 去掉字符串首位空格</span></span><br><span class="line">    trim &amp;&amp; <span class="keyword">typeof</span> value === <span class="string">'string'</span> &amp;&amp; (value = value.trim())</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="literal">undefined</span> || value === <span class="literal">null</span> || !value.length || <span class="built_in">JSON</span>.stringify(value) === <span class="string">'&#123;&#125;'</span>) &#123;</span><br><span class="line">      required &amp;&amp; (tips = <span class="keyword">typeof</span> required === <span class="string">'string'</span> ? required : <span class="string">`请输入<span class="subst">$&#123;alias&#125;</span>`</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pattern &amp;&amp; pattern <span class="keyword">instanceof</span> <span class="built_in">RegExp</span> &amp;&amp; !pattern.test(value)) &#123; <span class="comment">// 正则校验</span></span><br><span class="line">      tips = message</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> validate === <span class="string">'function'</span>) &#123; <span class="comment">// 自定义校验函数</span></span><br><span class="line">      <span class="keyword">const</span> res = validate(value, target)</span><br><span class="line">      tips = <span class="keyword">typeof</span> res === <span class="string">'string'</span> ? res : (!res ? message : <span class="literal">null</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tips ? &#123; ...errors, [key]: tips &#125; : &#123; ...errors &#125;</span><br><span class="line">  &#125;, &#123;&#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Result(results)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="校验结果（Result）"><a href="#校验结果（Result）" class="headerlink" title="校验结果（Result）"></a>校验结果（Result）</h3><p>我们看到，在<code>validator</code>函数中，返回了<code>Result</code>的实例对象。代码很简单：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Result</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(errors = &#123;&#125;) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, errors)</span><br><span class="line">  &#125;</span><br><span class="line">  hasError() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>).length &gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  first(index = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.values(<span class="keyword">this</span>)[index - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  firstKey(index = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>)[index - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实也就是在普通的对象上，扩展（原型上添加）了3个方法。</p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="validator"><a href="#validator" class="headerlink" title="validator"></a>validator</h3><p>核心校验函数：<code>validator(target: Object, rules: Object) =&gt; result: Result</code>。</p>
<h3 id="target"><a href="#target" class="headerlink" title="target"></a>target</h3><p>待校验的目标对象集合：<code>{ name: &#39;Kevin&#39;, age: 18 }</code>。</p>
<h3 id="rules"><a href="#rules" class="headerlink" title="rules"></a>rules</h3><p>校验规则集合：<code>{ name: rule1, age: rule2 }</code>。</p>
<ul>
<li><code>alias</code>：字段别名。比如：姓名，年龄。作为默认提示语输出，忽略则为<code>key</code>。</li>
<li><code>trim</code>：是否忽略字符串首尾空格。默认<code>true</code>。</li>
<li><code>required</code>：是否必须。为字符串时作为提示语输出。</li>
<li><code>pattern</code>：正则表达式。</li>
<li><code>message</code>：作为校验提示语输出，忽略则输出默认提示语。</li>
<li><code>validate</code>：自定义校验函数，<code>validate(value, target)</code>。返回字符串时作为此次校验不通过的提示语输出，或者返回<code>boolean</code>表示是否通过本次校验，返回<code>fasle</code>时输出默认提示语。</li>
</ul>
<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><p>包括所有不通过校验的字段集合： <code>{ name: &#39;姓名不能为空&#39;, age: &#39;年龄必须大于12岁&#39; }</code>。</p>
<p>方法：</p>
<ul>
<li><code>result.hasError()</code>：本次校验是否有错（不通过）。</li>
<li><code>result.first([index: Number])</code>：校验结果中第一个字段的提示语。<code>index</code>指定第几个字段，默认为<code>1</code>。</li>
<li><code>result.firstKey([index: Number])</code>：校验结果中第一个字段的<code>key</code>。<code>index</code>使用同上。</li>
</ul>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p>该校验库已经发布到<a href="https://www.npmjs.com/package/@moohng/validator" target="_blank" rel="noopener">npm仓库</a>，可通过<code>npm</code>或<code>yarn</code>工具进行下载。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add @moohng/validator</span><br></pre></td></tr></table></figure>
<h3 id="在Vue中使用"><a href="#在Vue中使用" class="headerlink" title="在Vue中使用"></a>在<code>Vue</code>中使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">x-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-input</span> <span class="attr">label</span>=<span class="string">"姓名"</span> <span class="attr">v-modal</span>=<span class="string">"form.name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-upload</span> <span class="attr">label</span>=<span class="string">"头像"</span> <span class="attr">v-model</span>=<span class="string">"form.avatars"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-select</span> <span class="attr">label</span>=<span class="string">"性别"</span> <span class="attr">v-model</span>=<span class="string">"form.sex"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-input-number</span> <span class="attr">label</span>=<span class="string">"年龄"</span> <span class="attr">v-model</span>=<span class="string">"form.age"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-button</span> <span class="attr">type</span>=<span class="string">"submit"</span> @<span class="attr">click</span>=<span class="string">"onSubmit"</span>&gt;</span>提交<span class="tag">&lt;<span class="name">x-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">x-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tempalte</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">srcipt</span>&gt;</span></span><br><span class="line">import &#123; validator &#125; from '@moohng/validator'</span><br><span class="line">import rules from './rules'</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      result: null,</span><br><span class="line">      form: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onSubmit() &#123;</span><br><span class="line">      this.result = validator(form, rules)</span><br><span class="line">      if (this.result.hasError()) &#123;</span><br><span class="line">        this.$toast(this.result.first())</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>假如你需要在校验报错之后对相应的组件进行样式上的处理，可通过响应式的<code>result</code>去完成：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">x-form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x-input</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:class</span>=<span class="string">"&#123; 'error': result.name &#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">label</span>=<span class="string">"姓名"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-modal</span>=<span class="string">"form.name"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">x-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tempalte</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更优雅的做法是通过一个<code>自定义指令</code>去完成这些事情，比如一些滚动、聚焦、失焦、样式切换等行为。你需要记住的是：你已经拿到了这个校验结果，这个结果已包含了你需要的信息，且是响应式的（在<code>data</code>中已预先定义），之后的一切处理都可通过这个<code>result</code>对象去自行扩展。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>如果觉得不错，请大家多多支持~</p>
</div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/validator/">validator</a><span class="tag-list-count">1</span></li></ul></div><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a><span class="category-list-count">3</span></li></ul></div></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cjlf0g84g000frgut6vvgrhlm" data-title="超轻量代码实现字段校验工具库（移动端）" data-url="http://moohng.com/2018/02/10/cjlf0g84g000frgut6vvgrhlm/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2018/08/26/cjlf0g84j000hrgutihqs5qix/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2017/09/07/cjlf0g84d000brgutz84q0q59/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/moohng" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/moohng" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="https://www.segmentfault.com/u/bon" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2018 红颜漠<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>